# Email Processing System - Environment Configuration
# Copy this file to .env and fill in your actual values

# ============================================================================
# IMAP Configuration
# ============================================================================
# For Gmail, you need to:
# 1. Enable 2-factor authentication
# 2. Create an App Password: https://myaccount.google.com/apppasswords
# 3. Use the App Password here (not your regular Gmail password)

# Work account credentials
IMAP_USERNAME_WORK=your.email@work.com
IMAP_PASSWORD_WORK=your-app-password-here

SMTP_USERNAME_WORK=your.email@work.com
SMTP_PASSWORD_WORK=your-app-password-here

# Personal account credentials (optional)
IMAP_USERNAME_PERSONAL=your.email@personal.com
IMAP_PASSWORD_PERSONAL=your-app-password-here

SMTP_USERNAME_PERSONAL=your.email@personal.com
SMTP_PASSWORD_PERSONAL=your-app-password-here

# Microsoft 365 OAuth2 credentials (if using Office 365)
# To get refresh token, run: python scripts/oauth2_setup.py
# IMAP_USERNAME_OFFICE365=your.email@organization.com
# OAUTH2_REFRESH_TOKEN_OFFICE365=your-refresh-token-from-setup-script

# ============================================================================
# LLM Provider Configuration
# ============================================================================

# OpenAI Configuration
OPENAI_API_KEY=sk-your-openai-api-key-here

# Azure OpenAI Configuration (optional, for Azure deployment)
# Primary Azure region (e.g., West Europe)
# AZURE_OPENAI_API_KEY=your-azure-api-key-here
# AZURE_OPENAI_ENDPOINT=https://your-resource.openai.azure.com

# Secondary Azure region (optional, e.g., Sweden)
# AZURE_OPENAI_SWEDEN_API_KEY=your-azure-sweden-api-key-here
# AZURE_OPENAI_SWEDEN_ENDPOINT=https://your-sweden-resource.openai.azure.com

# AZURE_OPENAI_API_VERSION=2025-04-01-preview

# Embedding Provider: "openai" or "azure"
EMBEDDING_PROVIDER=openai

# Anthropic Configuration (if using Claude)
# ANTHROPIC_API_KEY=sk-ant-your-anthropic-api-key-here

# Local LLM Configuration (if using Ollama)
# OLLAMA_BASE_URL=http://localhost:11434
# OLLAMA_MODEL=llama2

# ============================================================================
# Database Configuration
# ============================================================================
# PostgreSQL with pgvector (recommended)
DATABASE_URL=postgresql://user:password@localhost:5432/email_processor

# Database field encryption key (generate with: python -c "import secrets; print(secrets.token_urlsafe(32))")
DB_ENCRYPTION_KEY=generate-a-new-key-here

# ============================================================================
# API Security
# ============================================================================
# API key for authenticating requests (generate with: python -c "import secrets; print(secrets.token_urlsafe(32))")
API_KEY=generate-a-new-api-key-here

# Security alert settings
SECURITY_ALERT_EMAIL=admin@yourdomain.com
SECURITY_UNLOCK_KEY=generate-a-new-key-here

# ============================================================================
# Safety Configuration
# ============================================================================
# Set to true to prevent actual email actions (recommended for testing)
DRY_RUN=true

# Set to false to actually execute email actions (be careful!)
# DRY_RUN=false

# ============================================================================
# Application Settings
# ============================================================================
# Log level: DEBUG, INFO, WARNING, ERROR
LOG_LEVEL=INFO

# Maximum emails to process per run (for testing)
MAX_EMAILS_PER_RUN=10

# Enable IMAP debug logging (verbose)
IMAP_DEBUG=false

# ============================================================================
# Email Processing Rules
# ============================================================================
# Folders for different email categories
FOLDER_RECEIPTS=Receipts
FOLDER_NEWSLETTERS=Newsletters
FOLDER_ARCHIVE=Archive
FOLDER_URGENT=Urgent

# Default color for urgent emails (Apple Mail)
# 1=Red, 2=Orange, 3=Yellow, 4=Green, 5=Blue, 6=Purple, 7=Gray
URGENT_COLOR=1

# ============================================================================
# MCP Server Configuration (optional)
# ============================================================================
# API key for MCP server (can be same as API_KEY)
# BACKEND_API_KEY=your-api-key-here
# EMAIL_API_URL=https://your-server-url

# Backend public URL (required for OAuth callbacks)
# BACKEND_PUBLIC_URL=https://your-api-url

# MCP Query Restrictions (Security)
# Restrict queries to a specific account_id (e.g., "work", "personal")
# MCP_ALLOWED_ACCOUNT=work

# MCP Service Date Restrictions
# - MCP_DATE_LIMIT_DAYS: Maximum lookback (hard limit)
# - MCP_DEFAULT_DAYS: Default lookback when user doesn't specify date range
MCP_DATE_LIMIT_DAYS=730     # Max: 2 years (hard limit)
MCP_DEFAULT_DAYS=90         # Default: 3 months

# ============================================================================
# Google Services (optional, for Google Drive integration)
# ============================================================================
# GOOGLE_SERVICE_ACCOUNT_PATH=path/to/service-account.json
# GOOGLE_CLIENT_ID=your-client-id.apps.googleusercontent.com
# GOOGLE_CLIENT_SECRET=your-client-secret
# GOOGLE_REDIRECT_URI=http://localhost:8000/auth/google/callback
